<section class="p-8 max-w-5xl mx-auto">

  <h1 class="text-4xl font-extrabold mb-2 text-center text-primary">
    Pokémon API
  </h1>

  <h2 class="text-lg text-center mb-8 text-gray-600">
    Listado de Pokémon
  </h2>

  <!-- Spinner -->
  @if (!pokemonResource()) {
    <div class="flex justify-center items-center h-64">
      <span class="loading loading-spinner text-primary loading-lg"></span>
    </div>
  }

  <!-- Paginación -->
  @if (pokemonResource()) {
    <div class="flex items-center justify-center mb-6">
      <app-pagination
        [pages]="pokemonResource()?.pages ?? 0"
        [currentPage]="paginationService.currentPage()"
      ></app-pagination>
    </div>
  }

  <!-- Tabla -->
  @if (pokemonResource()) {

    <div class="overflow-x-auto shadow-lg rounded-xl border border-gray-300">
      <table class="table table-zebra">
        <thead class="bg-primary text-white text-sm">
          <tr>
            <th>ID</th>
            <th>Imagen</th>
            <th>Nombre</th>
            <th class="text-center">Acciones</th>
          </tr>
        </thead>

        <tbody>
          @for (poke of pokemonResource()?.results ?? []; track poke.name) {

            <tr class="hover:bg-primary/10 transition-all duration-200">

              <!-- ID -->
              <td class="font-bold text-gray-700">
                {{ getIdFromUrl(poke.url) }}
              </td>

              <!-- Imagen -->
              <td>
                <img
                  [src]="'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/' + getIdFromUrl(poke.url) + '.png'"
                  class="w-12 h-12 drop-shadow-lg hover:scale-110 transition-transform"
                  alt="{{ poke.name }}"
                />
              </td>

              <!-- Nombre -->
              <td class="capitalize font-semibold text-gray-800">
                {{ poke.name }}
              </td>

              <!-- Botón -->
              <td class="text-center">
                <a 
                  [routerLink]="['/pokemon', getIdFromUrl(poke.url)]" 
                  class="btn btn-sm btn-primary rounded-full shadow-md hover:shadow-lg hover:scale-105 transition-transform"
                >
                  Ver Detalle
                </a>
              </td>

            </tr>

          }
        </tbody>
      </table>
    </div>
  }

</section>
